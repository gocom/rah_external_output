h1. rah_external_output

p. Rah_external_output is a "Textpattern":http://textpattern.com plugin that outputs custom content-type snippets that can be requested via URL, but do not require "page templates":http://textpattern.net/wiki/index.php?title=Pages or "sections":http://textpattern.net/wiki/index.php?title=Sections.

p. This makes the plugin ideal for generating various publicly accessible snippets, like XML feeds or JavaScript Object Notations that can be then used to feed content to JavaScript scripts, or to integrate site content cross-domains.

p. The plugin uses Textpattern's "Form snippets":http://textpattern.net/wiki/index.php?title=Forms to power it's external output pages. You create a normal misc form with a prefixed name, and that form is then can be requested and access via direct URL by referring its name.

p. The term _external_ directly refers to no need of sections or page templates. Only thing you need is a form. In essence the plugin is for accessing Forms output via a URL.

h2. List of features

* "Forms":http://textpattern.net/wiki/index.php?title=Forms that names are prefixed with @rah_eo_@ can be requested, and their output accessed, directly using a URL.
* In addition to normal forms, these special Forms can contain HTTP header lines. Lines at the beginning of the form that start with @;@ are treated as headers.

h2. Requirements

p. Rah_external_output's minimum requirements:

* Textpattern v4.4.1 or newer.
* PHP5 or newer.

h2. Installation

p. The general behavior stands: paste plugin code to the plugin installer textarea and run the automatic setup. Then just activate the plugin and you are ready to use the plugin's features.

h2. Usage

p. Rah_external_output treats misc Forms that are prefixed with @rah_eo_@ as a "external" content-type snippets. These special prefixed Forms can be accessed using a URL. This URL would follow pattern:

bc. http://example.com/?rah_external_output=FormNameWithoutPrefix

p. Where @example.com@ is the site's URL and @FormNameWithoutPrefix@ is the form's name excluding the prefix. The above URL would output a misc Form named @rah_eo_FormNameWithoutPrefix@.

h2. Custom HTTP headers

p. In addition to Form normal features, rah_external_output's special Forms support sending custom HTTP headers, including content-types.

p. All lines at the beginning of the form starting with semicolon (@;@) are sent as HTTP headers, including content-types.

bc. ; Property: Value

p. Using these header lines visitor can be redirected, or document's content-type can be changed. Following Form would be sent as plain-text.

bc.. ; Content-type: text/plain

<txp:article_custom limit="15">
	<txp:permlink><txp:title /></txp:permlink>
</txp:article_custom>

h2. Changelog

h3. Version 1.0 - upcoming

* Removed: Plugin's own user interface. The plugin now uses @rah_eo_@ prefixed Form templates and integrates with Forms panel.
* Removed: @<txp:rah_external_output />@ tag. As forms are used, normal and more flexible "output_form":http://textpattern.net/wiki/index.php?title=output_form tag can be used.
* Removed: Raw PHP support to comply with "r3706.":http://code.google.com/p/textpattern/source/detail?r=3706
* Added: Ability to set snippet content-type using file extension in the name.
* Added: migration assistant script. The script is run automatically on install and migrates rah_external_output snippets from old interface to forms.
* Added: @rah_external_output.snippet_end@ callback event.
* Changed: tag trace can no longer be controlled using URL parameters. Tag trace is now visible when the snippet name has extension @.html@ and site is in debugging mode.
* Now requires PHP5 or newer.
* Compatibility with Textpattern v4.5.0.

h3. Version 0.9 - 2011/09/03

* Fixed: now handles raw PHP tags.
* Changed: now parses tag structure in same fashion as core. Do it twice. Provides identical results with core in every scenario.
* Added: ability to display tag trace, and error reporting, by adding @rah_external_output_trace@ parameter (@&rah_external_output_trace=1@) to the snippet URL when site's production status is set to _debugging_.

h3. Version 0.8 - 2011/07/26

* Added: CSRF (session riding) protection using Textpattern's core functions introduced in v4.4.1.
* Changed: Make sure the plugin interfaces is all in one language.
* Changed: Only try to drop old database tables when humanly possible that there is old leftovers. Don't run queries when updating from clean to clean.
* Changed: set temporary version number when installing. Removes the possibility of running the installer twice for no reason.
* Now requires Textpattern version 4.4.1 or newer.

h3. Version 0.7 - 2011/06/12

* Fixed: Error in @<txp:rah_external_output />@ tag.
* Fixed: Closed open @<thead>@ tag in the main list view.
* Fixed: Now admin-side page title uses language strings.

h3. Version 0.6 - 2011/04/15

* Fixed: Saving snippets while changing name.
* Fixed: Now keeps the sent data in the editor if error occurs during saving instead of fetching the old data from the database.
* Added: Translation support. Interface now uses language strings.
* Added: @<txp:rah_external_output />@ tag now caches fetched results.
* Added: Now uses plugin_lifecycle callbacks, and includes uninstaller.
* Added: Adds an options link to the Plugins pane which directs to the plugin's admin-interface.
* Removed: Mime-interface. Was confusing and not so many used it. Trying to simplify the user interface.
* Changed: The user-interface and markup. Removed heading, removed inline styles, added @<tbody>@ and @<thead>@ tags to the tables.
* Changed: Now uses new, improved multi-selection/edit feature, seen in other rah-plugins.
* Changed: now uses @textpattern@ callback instead of outputting the snippets right away when the plugin is loaded.
* Changed: Now checks if the saving/updating succeeds, instead of expecting.
* Now requires Textpattern 4.2.0 (or newer) for full feature compatibility.

h3. Version 0.5 - 2010/04/11

* Added _disable_ and _activate_ actions to multiedit feature.

h3. Version 0.4 - 2009/06/08

* Fixed forgotten insert query escaping.

h3. Version 0.3 - 2009/05/10

* Fixed error caused by non-set @$pretext@ (note: TXP load order).
* Set @$pretext@ indexes to empty: we are not on page template.

h3. Version 0.2 - 2009/05/09

* Fixed forgotten parse call.

h3. Version 0.1 - 2009/05/09

* Initial release.